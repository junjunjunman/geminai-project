<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Gemini PDF ìš”ì•½ ì„œë¹„ìŠ¤</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .container { max-width: 800px; margin: auto; padding: 20px; border: 1px solid #ccc; border-radius: 8px; }
        h1 { color: #4285F4; }
        #summary_result { margin-top: 20px; padding: 15px; background-color: #f9f9f9; border: 1px dashed #aaa; min-height: 100px; white-space: pre-wrap; }
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #4285F4; border-radius: 50%; width: 20px; height: 20px; animation: spin 2s linear infinite; display: none; margin: 10px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“š Gemini PDF ìš”ì•½ê¸°</h1>
        <p>ìš”ì•½í•  PDF íŒŒì¼ì„ ì„ íƒí•˜ê³  'ìš”ì•½ ì‹œì‘' ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>
        
        <form id="upload_form">
            <input type="file" id="pdf_file" accept=".pdf" required>
            <button type="submit">ìš”ì•½ ì‹œì‘</button>
        </form>

        <div class="loader" id="loader"></div>
        
        <h2>ìš”ì•½ ê²°ê³¼:</h2>
        <div id="summary_result">ì—¬ê¸°ì— ìš”ì•½ ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.</div>
    </div>

    <script>
        document.getElementById('upload_form').addEventListener('submit', function(e) {
            e.preventDefault(); // ê¸°ë³¸ í¼ ì œì¶œ ë°©ì§€

            const fileInput = document.getElementById('pdf_file');
            const resultDiv = document.getElementById('summary_result');
            const loader = document.getElementById('loader');
            
            if (fileInput.files.length === 0) {
                alert('íŒŒì¼ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.');
                return;
            }

            const formData = new FormData();
            formData.append('pdf_file', fileInput.files[0]);

            resultDiv.textContent = 'ìš”ì•½ ì§„í–‰ ì¤‘... ì ì‹œë§Œ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”.';
            loader.style.display = 'block'; // ë¡œë”© ìŠ¤í”¼ë„ˆ í‘œì‹œ

            fetch('/summarize', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                loader.style.display = 'none'; // ë¡œë”© ìŠ¤í”¼ë„ˆ ìˆ¨ê¹€
                if (data.error) {
                    resultDiv.textContent = 'ì˜¤ë¥˜ ë°œìƒ: ' + data.error;
                } else {
                    resultDiv.textContent = data.summary;
                }
            })
            .catch(error => {
                loader.style.display = 'none';
                resultDiv.textContent = 'ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error;
            });
        });
    </script>
</body>
</html>